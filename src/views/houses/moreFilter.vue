<template>
  <div class="morefilter">
    <div class="box" :style="{height}" :class="{cn: tcenter}">
    <!-- <div>帅选</div> -->
      <div class="list">
        <div class="title">租金</div>
        <radio class="radio-list" v-model="filterData.rent" :valueData="rentList"></radio>
      </div>
      <div class="list">
        <div class="title">房源户型</div>
        <checkbox class="radio-list" v-model="filterData.houseType" :valueData="houseTypeList"></checkbox>
      </div>
      <div class="list">
        <div class="title">房源类型</div>
        <checkbox class="radio-list" v-model="filterData.menuResp" :valueData="menuRespList"></checkbox>
      </div>
      <div class="list">
        <div class="title">朝向</div>
        <checkbox class="radio-list" v-model="filterData.orientation" :valueData="orientationList"></checkbox>
      </div>
      <div class="list">
        <div class="title">房屋配置</div>
        <checkbox class="radio-list" v-model="filterData.configResp" :valueData="configRespList"></checkbox>
      </div>
      <div class="list">
        <div class="title">房源特色</div>
        <checkbox class="radio-list" v-model="filterData.hotTagResp" :valueData="hotTagRespList"></checkbox>
      </div>
    </div>
    <div class="bottom">
      <div class="reset" @click="resetClick">重置</div>
      <div class="confirm" @click="confirm">确定</div>
    </div>
  </div>
</template>

<script>
import {filterCondition} from '@/api/house'
import radio from 'components/csradio/index'
import checkbox from 'components/cscheckbox/index'
export default {
  props: {
    value: {
      type: Object,
      default: () => {}
    },
    confirmFilter: {
      default: null,
      type: Function
    },
    height: {
      default: 'auto',
      type: String
    },
    tcenter: {
      default: false,
      type: Boolean
    }
  },
  watch: {
    filterData: {
      handler (val, old) {
        console.log(val)
        this.$emit('input', val)
      },
      deep: true
    }
  },
  data () {
    return {
      rentList: [
        {id: 1, min: 0, max: 1000, name: '≤1000元'},
        {id: 2, min: 1000, max: 1500, name: '1000-1500元'},
        {id: 3, min: 1500, max: 2000, name: '1500-2000元'},
        {id: 4, min: 2000, max: 3000, name: '2000-3000元'},
        {id: 5, min: 3000, max: 5000, name: '3000-5000元'},
        {id: 6, min: 5000, max: 8000, name: '5000-8000元'},
        {id: 7, min: 8000, max: 1500000, name: '≥8000元'}
      ],
      configRespList: [], // 房间配置
      hotTagRespList: [], // 房间特色
      houseTypeList: [], // 户型
      menuRespList: [], // 房产类型
      orientationList: [], // 朝向
      filterData: {}
    }
  },
  created () {
    this.filterData = this.value
    this._filterCondition()
    console.log(this.filterData)
  },
  methods: {
    resetClick () {
      this.filterData.rent = {}
      this.filterData.configResp = []
      this.filterData.hotTagResp = []
      this.filterData.houseType = []
      this.filterData.menuResp = []
      this.filterData.orientation = []
    },
    confirm () {
      console.log('ddd')
      // this.$emit('confirmFilter')
      this.$parent.confirm(this.filterData)
      // if (this.confirmFilter) {
      //   this.confirmFilter()
      // }
    },
    _filterCondition () {
      filterCondition().then(res => {
        console.log(res)
        if (res.code === 1) {
          this.configRespList = res.data.configRespList
          this.hotTagRespList = res.data.hotTagRespList
          this.houseTypeList = res.data.houseTypeList
          this.menuRespList = res.data.menuRespList
          this.orientationList = res.data.orientationList
        }
      })
    }
  },
  components: {
    radio, checkbox
  }
}
</script>

<style lang="less" scoped>
@import '../../styles/mixin.less';
.morefilter {
    padding-bottom: 40px;
    .box {
      // height: 340px;
      overflow-y: scroll;
      &.cn {
        .title {
          text-align: center;
        }
      }
    }
    .radio-list{
      padding: 10px 4px;
    }
    .title {
      font-size: 14px;
      // text-align: center;
      line-height: 24px;
      padding: 0 15px;
      // padding: 10px;
    }
    .bottom{
      position: absolute;
      bottom: 0;
      width: 100%;
      display: flex;
      text-align: center;
      font-size: 15px;
      height: 40px;
      line-height: 40px;
      .reset{
        flex: 1;
        background-color: #f8f8f8;
      }
      .confirm{
        flex: 1;
        background-color: @themeColor;
        color: #fff;
      }
    }
  }
</style>
